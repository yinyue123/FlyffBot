# WASM Memory Scanner - 浏览器扩展

一个强大的 WebAssembly 内存扫描工具，类似 Cheat Engine 的浏览器扩展版本。

## ✨ 功能特性

- 🔍 **内存扫描** - 在 WASM 内存中搜索任意值
- 🔄 **多次过滤** - 通过多次扫描精确定位目标地址
- ✏️ **内存修改** - 直接修改找到的内存值
- 👁️ **实时监控** - 监控多个地址的实时变化
- 📊 **开发者工具集成** - 提供专业的 DevTools 面板
- 🎯 **多种数据类型** - 支持 int8/16/32, uint8/16/32, float32/64
- 💾 **结果导出** - 导出扫描结果为 JSON

## 📦 安装方法

### 方法 1: 从源码安装（开发者模式）

1. **生成图标**（可选）
   ```bash
   # 在浏览器中打开 icons/create-icons.html
   # 点击按钮生成并下载 icon16.png, icon48.png, icon128.png
   # 将下载的图标文件放到 icons/ 目录
   ```

   或者使用占位符图标（跳过此步骤，扩展会使用默认图标）

2. **加载扩展到 Chrome/Edge**
   - 打开浏览器，访问 `chrome://extensions/`
   - 开启右上角的「开发者模式」
   - 点击「加载已解压的扩展程序」
   - 选择 `extension` 文件夹

3. **加载扩展到 Firefox**
   - 打开浏览器，访问 `about:debugging#/runtime/this-firefox`
   - 点击「临时加载附加组件」
   - 选择 `extension/manifest.json` 文件

### 方法 2: 打包安装

```bash
# 打包扩展
cd extension
zip -r wasm-scanner.zip .

# 然后在 chrome://extensions/ 拖放 zip 文件
```

## 🚀 使用方法

### 快速开始

1. **访问包含 WASM 的网页**
   - 打开任何使用 WebAssembly 的网站或游戏

2. **打开扩展**
   - 点击浏览器工具栏的扩展图标
   - 点击「💉 注入扫描器」按钮

3. **打开开发者工具**
   - 按 F12 打开开发者工具
   - 切换到「WASM Scanner」标签页

4. **开始扫描**
   - 在游戏中查看当前数值（如 HP = 1000）
   - 在扫描器中输入 1000，选择数据类型（通常是 Int32）
   - 点击「🔍 首次扫描」
   - 改变游戏中的数值（如受伤后 HP = 950）
   - 在扫描器中输入 950，点击「🔄 继续扫描」
   - 重复此过程直到找到唯一地址

5. **修改内存**
   - 在结果列表中点击「✏️ 修改」
   - 输入新的数值
   - 立即生效！

### 详细教程

#### 场景 1: 查找角色血量

```
1. 当前 HP: 1000
   → 首次扫描: 1000, Int32
   → 结果: 15234 个地址

2. 受到伤害, HP: 950
   → 继续扫描: 950, 精确值
   → 结果: 234 个地址

3. 使用药水, HP: 1000
   → 继续扫描: 1000, 精确值
   → 结果: 12 个地址

4. 再次受伤, HP: 800
   → 继续扫描: 800, 精确值
   → 结果: 2 个地址

5. 找到目标！
   → 点击「➕ 监控」加入监控列表
   → 点击「✏️ 修改」设置为 9999
```

#### 场景 2: 查找金币数量

```
1. 当前金币: 5000
   → 首次扫描: 5000, UInt32

2. 买东西花了 200
   → 继续扫描: 4800, 精确值

3. 卖东西赚了 500
   → 继续扫描: 5300, 精确值

4. 找到金币地址
   → 修改为 999999
```

#### 场景 3: 不知道具体数值

```
1. 不知道当前生命值
   → 首次扫描: (留空)
   → 选择比较模式: "已改变"

2. 受到伤害
   → 继续扫描: 比较模式 = "减少"

3. 再次受伤
   → 继续扫描: 比较模式 = "减少"

4. 使用药水
   → 继续扫描: 比较模式 = "增加"

5. 站着不动
   → 继续扫描: 比较模式 = "未改变"
```

## 🎮 界面说明

### Popup 界面（点击扩展图标）

- **注入扫描器** - 将扫描工具注入到当前页面
- **打开开发者面板** - 提示打开 DevTools
- **WASM 实例列表** - 显示检测到的 WASM 内存
- **快速扫描** - 简单的扫描操作

### DevTools 面板（按 F12 → WASM Scanner）

**左侧面板：**
- WASM 实例选择
- 扫描设置（值、类型、比较模式）
- 扫描统计（结果数、扫描时间）
- 内存修改工具

**右侧面板：**
- 搜索结果表格（地址、值、类型、操作）
- 监控列表（实时更新）
- 过滤和导出功能

**底部面板：**
- 日志输出（所有操作记录）

## 🔧 高级功能

### 1. 监控列表

- 点击结果中的「➕ 监控」添加到监控列表
- 自动每秒刷新，显示实时变化
- 值改变时会高亮显示
- 可以在监控列表中直接删除

### 2. 导出结果

- 点击「💾 导出」按钮
- 将搜索结果保存为 JSON 文件
- 可以用于后续分析或分享

### 3. 过滤结果

- 在结果列表上方的输入框输入地址（如 "0x12"）
- 实时过滤显示匹配的结果

### 4. 数据类型说明

| 类型 | 说明 | 范围 | 用途 |
|------|------|------|------|
| Int8 | 有符号 8 位 | -128 ~ 127 | 小整数 |
| UInt8 | 无符号 8 位 | 0 ~ 255 | 字节、颜色 |
| Int16 | 有符号 16 位 | -32768 ~ 32767 | 中等整数 |
| UInt16 | 无符号 16 位 | 0 ~ 65535 | ID、端口 |
| Int32 | 有符号 32 位 | -2^31 ~ 2^31-1 | 大整数、HP、金币 |
| UInt32 | 无符号 32 位 | 0 ~ 2^32-1 | 大整数（只正数）|
| Float32 | 32 位浮点 | ±3.4e38 | 百分比、速度 |
| Float64 | 64 位浮点 | ±1.7e308 | 高精度数值 |

### 5. 比较模式说明

- **精确值** - 值必须等于输入的数值
- **已改变** - 值与上次不同
- **未改变** - 值与上次相同
- **增加** - 值比上次大
- **减少** - 值比上次小

## 📝 使用技巧

### 如何选择数据类型？

1. **整数（金币、经验、等级）** → Int32 或 UInt32
2. **百分比（50.5%）** → Float32
3. **小数值（-128 ~ 127）** → Int8
4. **ID、索引** → UInt16 或 UInt32

### 如何快速定位？

1. **首次扫描尽量精确** - 知道确切数值时使用精确值
2. **利用"未改变"** - 数值不变时使用"未改变"过滤掉其他地址
3. **利用"增加/减少"** - 不知道具体值但知道变化趋势时使用
4. **监控多个候选** - 找到几个候选地址后，都加入监控，观察哪个是真的

### 常见问题

**Q: 扫描很慢？**
A: 首次扫描会遍历整个内存，可能需要几秒。后续扫描会快很多。

**Q: 找不到 WASM 实例？**
A: 等待页面完全加载，或者点击「刷新」按钮重新检测。

**Q: 修改后没效果？**
A: 可能找错了地址，或者游戏有防护机制，或者数据类型不对。

**Q: 扫描后结果太多？**
A: 多扫描几次，每次改变数值后继续扫描，结果会越来越少。

**Q: 某些值找不到？**
A: 尝试不同的数据类型，有些值可能是 Float 或 UInt。

## ⚠️ 注意事项

1. **合法使用** - 仅用于单机游戏和学习研究
2. **不要作弊** - 不要用于破坏在线游戏平衡
3. **可能被检测** - 某些游戏有反作弊机制
4. **数据备份** - 修改前最好保存游戏
5. **页面刷新** - 刷新页面后需要重新注入

## 🐛 调试

如果遇到问题，可以在控制台查看调试信息：

```javascript
// 查看所有 WASM 实例
window.__wasmScannerDebug__.getMemories()

// 查看所有扫描器
window.__wasmScannerDebug__.getScanners()

// 查看当前扫描器
window.__wasmScannerDebug__.getCurrentScanner()

// 重新扫描 WASM 实例
window.__wasmScannerDebug__.scan()
```

## 📚 技术架构

```
扩展结构:
├── manifest.json          # 扩展配置
├── background.js          # 后台服务
├── popup/                 # 弹出界面
│   ├── popup.html
│   ├── popup.css
│   └── popup.js
├── content/               # 内容脚本
│   ├── content.js        # 桥梁脚本
│   ├── injected.js       # 注入到页面的脚本
│   └── memory-scanner.js # 核心扫描库
└── devtools/              # 开发者工具面板
    ├── devtools.html
    ├── devtools.js
    ├── panel.html
    ├── panel.css
    └── panel.js
```

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

MIT License - 仅供学习和研究使用

## 🔗 相关链接

- [WebAssembly 文档](https://developer.mozilla.org/en-US/docs/WebAssembly)
- [Chrome 扩展开发](https://developer.chrome.com/docs/extensions/)
- [Cheat Engine](https://www.cheatengine.org/)

---

**祝你使用愉快！记得负责任地使用这个工具。** 🎮
